---
title: "LangChain SDK"
description: "使用 LangChain SDK 调用 OpenAI 兼容模型"
i18n: "zh"
---

认证和模型列表请参考 [概述](/api-reference/openai/overview)。

## 安装

```bash
pip install langchain-openai
```

## 代码示例

<Tabs>
  <Tab title="Python">
```python
import os
from langchain_openai import ChatOpenAI

llm = ChatOpenAI(
  model='gpt-4.1',
  api_key=os.getenv('PIPELLM_API_KEY'),
  base_url='https://api.pipellm.com/v1'
)

response = llm.invoke([
  ('user', 'Why is the sky blue?')
])

print(response.content)
```
  </Tab>
  <Tab title="Node.js">
```javascript
import { ChatOpenAI } from '@langchain/openai';

const llm = new ChatOpenAI({
  model: 'gpt-4.1',
  apiKey: process.env.PIPELLM_API_KEY,
  configuration: {
    baseURL: 'https://api.pipellm.com/v1'
  }
});

const response = await llm.invoke([
  { role: 'user', content: 'Why is the sky blue?' }
]);

console.log(response.content);
```
  </Tab>
</Tabs>

## 流式响应

```python
import os
from langchain_openai import ChatOpenAI

llm = ChatOpenAI(
  model='gpt-4.1',
  api_key=os.getenv('PIPELLM_API_KEY'),
  base_url='https://api.pipellm.com/v1',
  streaming=True
)

for chunk in llm.stream('Tell me a story'):
  print(chunk.content, end='', flush=True)
```

## 函数调用

```python
import os
from langchain_openai import ChatOpenAI
from langchain_core.tools import tool

@tool
def get_weather(location: str) -> str:
  """获取指定地点的天气"""
  return f"{location} 的天气：22°C，晴天"

llm = ChatOpenAI(
  model='gpt-4.1',
  api_key=os.getenv('PIPELLM_API_KEY'),
  base_url='https://api.pipellm.com/v1'
)

llm_with_tools = llm.bind_tools([get_weather])
response = llm_with_tools.invoke("东京现在天气怎么样？")

print(response.tool_calls)
```
